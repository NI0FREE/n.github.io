<!DOCTYPE html>
<html lang="en">
    <head>
        <style text="text/css">
            * { margin:0; padding:0; }
            html, body { width:100%; height:100%; }
            canvas { display:block; }
        </style>
    </head>
<body>
    <script src="https://ni0free.github.io/n.github.io/fabric.min%20(1).js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<div class="intro">
    <p id="LOG">00</p>
    <canvas id="largecanv" ></canvas>
</div>
                
</body>
<script>
    
 let canvcanv = document.getElementById('largecanv');

 canvcanv.width=window.outerWidth;
 canvcanv.height=window.outerHeight;
 (function() {
        var canvcanvcanvcanv = canvcanv
        context = canvcanvcanvcanv.getContext('2d');
        canvcanvcanvcanv.width = window.innerWidth;
        canvcanvcanvcanv.height = window.innerHeight;
 })();
// create a wrapper around native canvas element (with id="c")
var canvas = new fabric.Canvas('largecanv');

// create a rectangle object
var rect = new fabric.Rect({
  left: 100,
  top: 100,
  fill: 'red',
  width: 100,
  height: 100,
  selectable: false,
  hasControls: false,
  hasBorders: false,
  hasRotatingPoint: false,
  selectable: false,
  evented: false,
  transparentCorners: false,
  centeredScaling: false,
  centeredRotation: false,
  padding: false,
  cornerSize: false,
  rotatingPointOffset: false,
  borderColor: false,
  cornerColor: false,
  cornerStrokeColor: false,
  cornerStyle1: false,
  cornerStyle2: false
});


// "add" rectangle onto canvas
canvas.add(rect);
let costilcanvas = document.getElementsByClassName('upper-canvas')[0];
costilcanvas.addEventListener('mouseup', function () {
    canvas.setViewportTransform(canvas.viewportTransform);
    canvas.isDragging = false;
    canvas.selection = true;
}, false);

costilcanvas.addEventListener('mousedown', function (event) {
    var evt = event;
    canvas.isDragging = true;
    canvas.selection = false;
    canvas.lastPosX = evt.clientX;
    canvas.lastPosY = evt.clientY;       
}, false);
costilcanvas.addEventListener('mousemove', function (event) {
    if (canvas.isDragging) {
    var e = event;
    var vpt = canvas.viewportTransform;
    vpt[4] += e.clientX - canvas.lastPosX;
    vpt[5] += e.clientY - canvas.lastPosY;
    
    canvas.requestRenderAll();
    canvas.lastPosX = e.clientX;
    canvas.lastPosY = e.clientY;
  }
}, false);
///////////////////////////////////////////////////phone
        costilcanvas.addEventListener("touchstart", function (event) {
            var evt = event;
            canvas.isDragging = true;
            canvas.selection = false;
            canvas.lastPosX = Math.trunc(evt.touches[0].clientX)
            canvas.lastPosY = Math.trunc(evt.touches[0].clientY)
           

                event.preventDefault();
        }, false); 

        costilcanvas.addEventListener("touchmove", function (event) {
            if (canvas.isDragging) {
                var e = event;
                let ex = Math.trunc(e.touches[0].clientX)
                let ey = Math.trunc(e.touches[0].clientY)
                var vpt = canvas.viewportTransform;
                vpt[4] += ex - canvas.lastPosX;
                vpt[5] += ey - canvas.lastPosY;
                canvas.requestRenderAll();
                canvas.lastPosX = ex
                canvas.lastPosY = ey
                
                
            }
            event.preventDefault();
        }, false,{passive: false});
        costilcanvas.addEventListener("touchend", function (event) {
            canvas.setViewportTransform(canvas.viewportTransform);
            canvas.isDragging = false;
            canvas.selection = true;
            
            
            event.preventDefault();
        }, false);




//////////////////////////////////////////////////////
canvas.on('mouse:wheel', function(opt) {
  var delta = opt.e.deltaY;
  var zoom = canvas.getZoom();
  zoom *= 0.999 ** delta;
  if (zoom > 20) zoom = 20;
  if (zoom < 0.01) zoom = 0.01;
  canvas.zoomToPoint({ x: opt.e.offsetX, y: opt.e.offsetY }, zoom);
  opt.e.preventDefault();
  opt.e.stopPropagation();
});

// document.getElementsByClassName('canvas-container')[0].style.top= "-8px";
// document.getElementsByClassName('canvas-container')[0].style.left= "-8px";
</script>
</html
